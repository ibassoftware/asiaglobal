<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="asiaglobal_report_purchase_document" inherit_id="purchase.report_purchaseorder_document">
            <xpath expr="//t[@t-call='web.external_layout']" position="replace">
                <t t-call="asiaglobal.external_layout_purchase_asiaglobal">
                    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
                    <div class="page">
                        <br/>
                        <table class="list_table" style="border:none;font-size:14px" width="100%">
                            <tr>
                                <td class="td_border" valign="top" width="46%">
                                    <b>Vendor</b>
                                </td>
                                <td class="noborder" width="8%"></td>
                                <td class="td_border" valign="top" width="46%" >
                                    <b>Ship To</b>
                                </td>
                            </tr>
                            <tr>
                                <td class="td_border" width="46%">
                                    <span class="uppercase">
                                        <b>
                                            <span t-field="o.partner_id"/>
                                        </b><br />
                                    </span>
                                    <address t-field="o.partner_id"
                                    t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                                </td>
                                <td class="noborder"  width="8%"></td>
                                <td class="td_border" width="46%">
                                    <span class="uppercase">
                                        <b>
                                            <span t-field="o.company_id"/>
                                        </b><br />
                                    </span>
                                    <address t-field="o.company_id.partner_id"
                                    t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                                </td>
                            </tr>
                            <tr>
                                <td class="noborder" valign="top" width="46%">
                                    <table style="border:none;font-size:14px" width="100%">
                                        <tr>
                                            <td width="20%" class="td_border">
                                                <b>Terms</b>
                                            </td>
                                            <td width="30%" class="td_border">
                                                <span t-field="o.payment_term_id.name"/>
                                            </td>
                                            <td width="20%" class="td_border">
                                                <b>Dept.</b>
                                            </td>
                                            <td width="30%" class="td_border">
                                                <span t-field="o.department"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td class="noborder"  width="8%"></td>
                                <td class="noborder" valign="top" width="46%">
                                    <table style="border:none;font-size:14px" width="100%">
                                        <tr>
                                            <td width="30%" class="td_border">
                                                <b>Ship Via</b>
                                            </td>
                                            <td width="70%" class="td_border">
                                                <span t-field="o.ship_via"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </table>

                        <table style="border: 1px solid black;font-size:14px;" width="100%">
                            <thead>
                                <tr>
                                    <th width="20%" class="td_border"><strong>Item Code</strong></th>
                                    <th width="15%" class="td_border"><strong>Part Number</strong></th>
                                    <th width="10%" class="td_border text-center"><strong>Quantity</strong></th>
                                    <th width="30%" class="td_border"><strong>Description</strong></th>
                                    <th width="15%" class="td_border text-right"><strong>Unit Price</strong></th>
                                    <th width="10%" class="td_border text-right"><strong>Total Price</strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="line_count" t-value="0"/>
                                <tr style="font-size:14px;" t-foreach="o.order_line" t-as="line">
                                    <t t-set="line_count" t-value="line_count + 1"/>
                                    <td width="20%" class="td_vertical_border">
                                        <span t-field="line.product_id.default_code"/>
                                    </td>
                                    <td width="15%" class="td_vertical_border">
                                        <span t-field="line.part_number"/>
                                    </td>
                                    <td width="10%" class="td_vertical_border text-center">
                                        <span t-esc="int(float(line.product_qty))"/>
                                    </td>
                                    <td width="30%" class="td_vertical_border">
                                        <span t-field="line.name"/>
                                    </td>
                                    <td width="15%" class="td_vertical_border text-right">
                                        <span t-field="line.price_unit"/>
                                    </td>
                                    <td width="10%" class="td_vertical_border text-right">
                                        <span t-esc="'{0:,.2f}'.format(line.price_subtotal)" />
                                    </td>
                                </tr>
                                <t t-set="break_count" t-value="15 - line_count"/>
                                <t t-if="break_count > 0">
                                    <t t-foreach="break_count" t-as="break">
                                        <tr>
                                            <td width="20%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                            <td width="15%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                            <td width="10%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                            <td width="30%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                            <td width="15%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                            <td width="10%" class="td_vertical_border">
                                                <br/>
                                            </td>
                                        </tr>                                       
                                    </t>
                                </t>
                                <tr style="font-size:14px;">
                                    <td colspan="6" class="td_border">
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4" class="td_border">
                                    </td>
                                    <td width="15%" class="td_border">
                                        <div class="col-xs-6">
                                            <span><b><i>Total</i></b></span>
                                        </div>
                                        <div class="col-xs-6 text-right">
                                            <b><i><span t-field="o.currency_id.symbol"/></i></b>
                                        </div>
                                    </td>
                                    <td width="10%" class="td_border text-right">
                                        <b><i>
                                            <!-- <span t-field="o.amount_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/> -->
                                            <span t-esc="'{0:,.2f}'.format(o.amount_total)" />
                                        </i></b>
                                    </td>
                                </tr>
                                <tr style="font-size:14px;">
                                    <td colspan="6" class="td_border">
                                        <table style="border:none;font-size:14px" width="100%">
                                            <tr>
                                                <td width="25%" style="padding:0.5em;">
                                                    <center>
                                                        <b>Prepared By:</b><br/><br/>
                                                        _________________________
                                                        <span t-field="o.create_uid.name"/><br/>
                                                        Name &amp; Signature
                                                    </center>
                                                </td>
                                                <td width="25%" style="padding:0.5em;">
                                                    <center>
                                                        <b>Approver 1:</b><br/><br/>
                                                        _________________________<br/><br/>
                                                        Dept. Manager
                                                    </center>
                                                </td>
                                                <td width="25%" style="padding:0.5em;">
                                                    <center>
                                                        <b>Approver 2:</b><br/><br/>
                                                        _________________________<br/>
                                                        J. Malijan <br/>
                                                        AVP - Finance &amp; Admin
                                                    </center>
                                                </td>
                                                <td width="25%" style="padding:0.5em;">
                                                    <center>
                                                        <b>Noted By:</b><br/><br/>
                                                        _________________________<br/>
                                                        A. RAMOS <br/>
                                                        President
                                                    </center>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <br/>

                    </div>
                </t>
            </xpath>
        </template>

        <!-- START LOCAL PO -->
        <template id="asiaglobal_report_purchase_local_document">
            <t t-call="asiaglobal.external_layout_purchase_asiaglobal">
                <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
                <div class="page">
                    <br/>
                    <table style="border:none;font-size:14px" width="100%">
                        <tr>
                            <td class="td_border" valign="top" width="46%">
                                <b>Vendor</b>
                            </td>
                            <td class="noborder" width="8%"></td>
                            <td class="td_border" valign="top" width="46%">
                                <b>Ship To</b>
                            </td>
                        </tr>
                        <tr>
                            <td class="td_border" width="46%">                 
                                <span class="uppercase">
                                    <b>
                                        <span t-field="o.partner_id"/>
                                    </b><br />
                                </span>
                                <address t-field="o.partner_id"
                                t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                            </td>
                            <td class="noborder"  width="8%"></td>
                            <td class="td_border" width="46%">
                                <span class="uppercase">
                                    <b>
                                        <span t-field="o.company_id"/>
                                    </b><br />
                                </span>
                                <address t-field="o.company_id.partner_id"
                                t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                            </td>
                        </tr>
                        <tr>
                            <td class="noborder" valign="top" width="46%">
                                <table style="border:none;font-size:14px" width="100%">
                                    <tr>
                                        <td width="20%" class="td_border">
                                            <b>Terms</b>
                                        </td>
                                        <td width="30%" class="td_border">
                                            <span t-field="o.payment_term_id.name"/>
                                        </td>
                                        <td width="20%" class="td_border">
                                            <b>Dept.</b>
                                        </td>
                                        <td width="30%" class="td_border">
                                            <span t-field="o.department"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="noborder"  width="8%"></td>
                            <td class="noborder" valign="top" width="46%">
                                <table style="border:none;font-size:14px" width="100%">
                                    <tr>
                                        <td width="30%" class="td_border">
                                            <b>Ship Via</b>
                                        </td>
                                        <td width="70%" class="td_border">
                                            <span t-field="o.ship_via"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>

                        </tr>
                    </table>

                    <table style="border: 1px solid black;font-size:14px;">
                        <thead>
                            <tr>
                                <th width="20%" class="td_border"><strong>Item Code</strong></th>
                                <th width="35%" class="td_border"><strong>Description</strong></th>
                                <th width="10%" class="td_border text-center"><strong>Quantity</strong></th>
                                <th width="10%" class="td_border"><strong>UOM</strong></th>
                                <th width="15%" class="td_border text-right"><strong>Unit Price</strong></th>
                                <th width="10%" class="td_border text-right"><strong>Total Price</strong></th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="line_count" t-value="0"/>
                            <t t-foreach="o.order_line" t-as="line">
                                <t t-set="line_count" t-value="line_count + 1"/>
                                <tr>
                                    <td width="20%" class="td_border">
                                        <span t-field="line.product_id.default_code"/>
                                    </td>
                                    <td width="35%" class="td_border">
                                        <span t-field="line.name"/>
                                    </td>
                                    <td  width="10%" class="td_border text-center">
                                        <span t-esc="int(float(line.product_qty))"/>
                                    </td>
                                    <td width="10%" class="td_border">
                                        <!-- <span>LOT</span> -->
                                        <span t-field="line.product_uom.name"/>
                                    </td>
                                    <td width="15%" class="td_border text-right">
                                        <span t-field="line.price_unit"/>
                                    </td>
                                    <td width="10%" class="td_border text-right">
                                        <span t-esc="'{0:,.2f}'.format(line.price_subtotal)" />
                                    </td>
                                </tr>
                                <t t-foreach="line.taxes_id" t-as="tax">
                                    <t t-set="line_count" t-value="line_count + 1"/>
                                    <tr>
                                        <td width="20%" class="td_border">
                                            <br/>
                                        </td>
                                        <td width="35%" class="td_border">
                                            <span t-field="tax.name"/>
                                        </td>
                                        <td width="10%" class="td_border text-center">
                                            <br/>
                                        </td>
                                        <td width="10%" class="td_border">
                                            <br/>
                                        </td>
                                        <td width="15%" class="td_border text-right">
                                            <span><span t-esc="int(float(tax.amount))"/>%</span>
                                        </td>
                                        <td width="10%" class="td_border text-right">
                                            <span t-esc="float((line.price_unit * tax.amount) / 100)"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                            <t t-set="break_count" t-value="15 - line_count"/>
                            <t t-if="break_count > 0">
                                <t t-foreach="break_count" t-as="break">
                                    <tr>
                                        <td width="20%" class="td_border">
                                            <br/>
                                        </td>
                                        <td width="35%" class="td_border">
                                            <br/>
                                        </td>
                                        <td width="10%" class="td_border text-center">
                                            <br/>
                                        </td>
                                        <td width="30%" class="td_border">
                                            <br/>
                                        </td>
                                        <td width="15%" class="td_border text-right">
                                            <br/>
                                        </td>
                                        <td width="10%" class="td_border text-right">
                                            <br/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                            <tr>
                                <td colspan="4" class="td_border">
                                    <span t-field="o.notes"/>
                                </td>
                                <td width="15%" class="td_border">
                                    <div class="col-xs-6">
                                        <span><b><i>Total</i></b></span>
                                    </div>
                                    <div class="col-xs-6 text-right">
                                        <b><i><span t-field="o.currency_id.symbol"/></i></b>
                                    </div>
                                </td>
                                <td width="10%" class="td_border text-right">
                                    <b><i>
                                        <!-- <span t-field="o.amount_total" /> -->
                                        <span t-esc="'{0:,.2f}'.format(o.amount_total)" />
                                    </i></b>
                                </td>
                            </tr>
                            <tr style="font-size:14px;">
                                <td colspan="6" class="td_border">
                                    <table style="border:none;font-size:14px" width="100%">
                                        <tr>
                                            <td width="25%" style="padding:0.5em;">
                                                <center>
                                                    <b>Prepared By:</b><br/><br/>
                                                    _________________________
                                                    <span t-field="o.create_uid.name"/><br/>
                                                    Name &amp; Signature
                                                </center>
                                            </td>
                                            <td width="25%" style="padding:0.5em;">
                                                <center>
                                                    <b>Approver 1:</b><br/><br/>
                                                    _________________________<br/><br/>
                                                    Dept. Manager
                                                </center>
                                            </td>
                                            <td width="25%" style="padding:0.5em;">
                                                <center>
                                                    <b>Approver 2:</b><br/><br/>
                                                    _________________________<br/>
                                                    J. Malijan <br/>
                                                    AVP - Finance &amp; Admin
                                                </center>
                                            </td>
                                            <td width="25%" style="padding:0.5em;">
                                                <center>
                                                    <b>Noted By:</b><br/><br/>
                                                    _________________________<br/>
                                                    A. RAMOS <br/>
                                                    President
                                                </center>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <br/>
                   
                </div>
            </t>
        </template>
        
        <template id="asiaglobal_report_purchase_local">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="asiaglobal.asiaglobal_report_purchase_local_document" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </template>
        <!-- END LOCAL PO -->


    </data>
</odoo>
